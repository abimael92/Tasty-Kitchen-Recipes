---
import BaseLayout from '../layouts/BaseLayout.astro';
import Kitchen404Animation from '../components/Kitchen404Animation.astro';
import RecipeCategoryGrid from '../components/RecipeCategoryGrid.astro';
import ActionButtons from '../components/ActionButtons.astro';
import AICookingTips from '../components/AICookingTips.astro';
import { t } from '../utils/i18n.js';

const { currentLocale = 'es' } = Astro.props;
---

<BaseLayout title={t('recipes.notFound', currentLocale)}>
	<div class='error-page-container'>
		<!-- Background decorations -->
		<div class='error-bg-decoration top'></div>
		<div class='error-bg-decoration bottom'></div>

		<div class='error-content-wrapper'>
			<!-- Animated 404 -->
			<Kitchen404Animation />

			<!-- Main message -->
			<h1 class='error-title'>{t('recipes.notFound', currentLocale)}</h1>
			<p class='error-description'>
				{t('recipes.notFoundMessage', currentLocale)}
			</p>

			<!-- Action Buttons -->
			<ActionButtons />

			<!-- Recipe Categories -->
			<RecipeCategoryGrid title='Explore Popular Categories' />

			<!-- AI Cooking Tips -->
			<AICookingTips />

			<!-- Search Section -->
			<div class='search-section'>
				<p class='search-prompt'>Looking for something specific?</p>
				<form
					class='search-box'
					onSubmit={(e) => {
						e.preventDefault();
						const input = e.target.querySelector('input');
						const query = input.value.trim();
						if (query)
							window.location.href = `/recipes?search=${encodeURIComponent(query)}`;
					}}
				>
					<input
						type='text'
						placeholder='Search recipes, ingredients, or chefs...'
					/>
					<button type='submit'>
						<svg width='24' height='24' viewBox='0 0 24 24' fill='none'>
							<path
								d='M17 17L21 21'
								stroke='currentColor'
								stroke-width='2'
								stroke-linecap='round'></path>
							<path
								d='M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z'
								stroke='currentColor'
								stroke-width='2'></path>
						</svg>
					</button>
				</form>
			</div>
		</div>
	</div>

	<style>
		.error-page-container {
			min-height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
			position: relative;
			overflow: hidden;
			padding: var(--space-2xl);
			background: linear-gradient(
				135deg,
				color-mix(in srgb, var(--color-background) 95%, white),
				color-mix(in srgb, var(--color-svg-light) 85%, white)
			);
		}

		.error-bg-decoration {
			position: absolute;
			width: 400px;
			height: 400px;
			border-radius: 50%;
			opacity: 0.1;
			z-index: 0;
			filter: blur(40px);
		}

		.error-bg-decoration.top {
			top: -200px;
			right: -200px;
			background: radial-gradient(
				circle,
				var(--color-primary) 0%,
				transparent 70%
			);
		}

		.error-bg-decoration.bottom {
			bottom: -200px;
			left: -200px;
			background: radial-gradient(
				circle,
				var(--color-svg-fresh) 0%,
				transparent 70%
			);
		}

		.error-content-wrapper {
			position: relative;
			z-index: 1;
			width: 100%;
			max-width: 1000px;
			margin: 0 auto;
			animation: fadeInUp 0.6s var(--animation-timing);
		}

		@keyframes fadeInUp {
			from {
				opacity: 0;
				transform: translateY(20px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		.error-title {
			font-family: var(--font-heading);
			color: var(--color-primary);
			font-size: var(--text-3xl);
			text-align: center;
			margin: var(--space-xl) 0 var(--space-lg);
			line-height: 1.2;
		}

		.error-description {
			font-family: var(--font-body);
			color: var(--color-text-light);
			text-align: center;
			font-size: var(--text-lg);
			line-height: 1.6;
			margin-bottom: var(--space-2xl);
			max-width: 600px;
			margin-left: auto;
			margin-right: auto;
			padding: 0 var(--space-md);
		}

		.search-section {
			margin: var(--space-2xl) 0;
			text-align: center;
		}

		.search-prompt {
			font-family: var(--font-heading);
			color: var(--color-secondary);
			margin-bottom: var(--space-lg);
			font-size: var(--text-xl);
		}

		.search-box {
			display: flex;
			max-width: 600px;
			margin: 0 auto;
			border-radius: var(--radius-xl);
			overflow: hidden;
			box-shadow: var(--shadow-lg);
			border: 2px solid var(--color-secondary);
			transition: all var(--transition-medium);
		}

		.search-box:focus-within {
			border-color: var(--color-primary);
			box-shadow: var(--shadow-xl);
		}

		.search-box input {
			flex: 1;
			padding: var(--space-lg) var(--space-xl);
			border: none;
			font-family: var(--font-body);
			font-size: var(--text-base);
			background: var(--color-surface);
			color: var(--color-text);
		}

		.search-box input:focus {
			outline: none;
		}

		.search-box button {
			padding: 0 var(--space-xl);
			background: var(--color-secondary);
			border: none;
			color: white;
			cursor: pointer;
			transition: background var(--transition-fast);
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.search-box button:hover {
			background: var(--color-primary);
		}

		@media (max-width: 768px) {
			.error-page-container {
				padding: var(--space-lg);
			}

			.error-title {
				font-size: var(--text-2xl);
			}

			.error-description {
				font-size: var(--text-base);
				padding: 0;
			}

			.search-box {
				flex-direction: column;
				border-radius: var(--radius-lg);
			}

			.search-box input,
			.search-box button {
				width: 100%;
				padding: var(--space-md);
			}
		}
	</style>
</BaseLayout>
