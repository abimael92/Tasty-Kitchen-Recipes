---
const { url } = Astro;
// We don't care about URL prefixes anymore
const currentLocale = 'es'; // Always show Spanish by default, or use localStorage
const locales = ['es', 'en'];
---

<select id='language-selector' class='simple-select'>
	{
		locales.map((locale) => (
			<option value={locale} selected={locale === currentLocale}>
				{locale === 'es' ? 'ES' : 'EN'}
			</option>
		))
	}
</select>

<script is:inline>
	// Check localStorage for saved language preference
	const savedLocale = localStorage.getItem('preferred-language') || 'es';
	document.getElementById('language-selector').value = savedLocale;
	
	// When language changes, save preference and reload page
	document.getElementById('language-selector').addEventListener('change', (e) => {
		const newLocale = e.target.value;
		
		// Save preference
		localStorage.setItem('preferred-language', newLocale);
		
		// Reload the page to apply translations
		window.location.reload();
	});
</script>


<style>
	.simple-select {
		font-size: 14px;
		padding: 6px 10px;
		border-radius: 6px;
		border: 1px solid rgba(255, 255, 255, 0.4);
		background: rgba(0, 0, 0, 0.6);
		color: white;
		cursor: pointer;
		width: 70px;
		height: 36px;
		font-weight: 600;
	}

	.simple-select:hover {
		border-color: var(--color-accent);
		background: rgba(0, 0, 0, 0.7);
	}

	.simple-select:focus {
		outline: none;
		border-color: var(--color-accent);
	}

	.simple-select option {
		background: #333;
		color: white;
	}
</style>
